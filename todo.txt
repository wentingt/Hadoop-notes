Test on netty-example.

change to thread-safe map

how to wrap map into channelbuffer

disconnect but not close (rate limit)
