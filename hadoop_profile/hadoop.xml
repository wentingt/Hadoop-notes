<rspec xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jacks="http://www.protogeni.net/resources/rspec/ext/jacks/1" xmlns:client="http://www.protogeni.net/resources/rspec/ext/client/1" xmlns:emulab="http://www.protogeni.net/resources/rspec/ext/emulab/1" xmlns="http://www.geni.net/resources/rspec/3" xsi:schemaLocation="http://www.geni.net/resources/rspec/3 http://www.geni.net/resources/rspec/3/request.xsd" type="request">
  <rspec_tour xmlns="http://www.protogeni.net/resources/rspec/ext/apt-tour/1">
    <description type="text">A cluster running Hadoop 2.7.3. It includes a name node, a resource manager, and as many slaves as you choose.</description>
    <instructions type="markdown">After your instance boots (approx. 5-10 minutes), you can log into the resource manager node and submit jobs.  [The HDFS web UI](http://{host-namenode}:50070/) and [the resource manager UI](http://{host-resourcemanager}:8088/) will also become available.</instructions>
  </rspec_tour>
  <link client_id="link-1">
    <interface_ref client_id="namenode:if0"/>
    <interface_ref client_id="resourcemanager:if0"/>
    <interface_ref client_id="slave0:if0"/>
    <interface_ref client_id="slave1:if0"/>
    <interface_ref client_id="slave2:if0"/>
    <link_type name="lan"/>
  </link>
  <node client_id="namenode" exclusive="false">
    <sliver_type name="emulab-xen">
      <disk_image name="urn:publicid:IDN+emulab.net+image+emulab-ops//hadoop-273"/>
      <emulab:xen ram="256"/>
    </sliver_type>
    <interface client_id="namenode:if0"/>
    <services>
      <install url="http://www.emulab.net/downloads/hadoop-2.7.3-setup.tar.gz" install_path="/tmp"/>
      <execute shell="sh" command="sudo /tmp/setup/hadoop-setup.sh"/>
    </services>
    <emulab:routable_control_ip/>
  </node>
  <node client_id="resourcemanager" exclusive="false">
    <sliver_type name="emulab-xen">
      <disk_image name="urn:publicid:IDN+emulab.net+image+emulab-ops//hadoop-273"/>
      <emulab:xen ram="256"/>
    </sliver_type>
    <interface client_id="resourcemanager:if0"/>
    <services>
      <install url="http://www.emulab.net/downloads/hadoop-2.7.3-setup.tar.gz" install_path="/tmp"/>
      <execute shell="sh" command="sudo /tmp/setup/hadoop-setup.sh"/>
    </services>
    <emulab:routable_control_ip/>
  </node>
  <node client_id="slave0" exclusive="false">
    <sliver_type name="emulab-xen">
      <disk_image name="urn:publicid:IDN+emulab.net+image+emulab-ops//hadoop-273"/>
      <emulab:xen ram="256"/>
    </sliver_type>
    <interface client_id="slave0:if0"/>
    <services>
      <install url="http://www.emulab.net/downloads/hadoop-2.7.3-setup.tar.gz" install_path="/tmp"/>
      <execute shell="sh" command="sudo /tmp/setup/hadoop-setup.sh"/>
    </services>
  </node>
  <node client_id="slave1" exclusive="false">
    <sliver_type name="emulab-xen">
      <disk_image name="urn:publicid:IDN+emulab.net+image+emulab-ops//hadoop-273"/>
      <emulab:xen ram="256"/>
    </sliver_type>
    <interface client_id="slave1:if0"/>
    <services>
      <install url="http://www.emulab.net/downloads/hadoop-2.7.3-setup.tar.gz" install_path="/tmp"/>
      <execute shell="sh" command="sudo /tmp/setup/hadoop-setup.sh"/>
    </services>
  </node>
  <node client_id="slave2" exclusive="false">
    <sliver_type name="emulab-xen">
      <disk_image name="urn:publicid:IDN+emulab.net+image+emulab-ops//hadoop-273"/>
      <emulab:xen ram="256"/>
    </sliver_type>
    <interface client_id="slave2:if0"/>
    <services>
      <install url="http://www.emulab.net/downloads/hadoop-2.7.3-setup.tar.gz" install_path="/tmp"/>
      <execute shell="sh" command="sudo /tmp/setup/hadoop-setup.sh"/>
    </services>
  </node>
  <data_set xmlns="http://www.protogeni.net/resources/rspec/ext/profile-parameters/1">
    <data_item name="emulab.net.parameter.mem">256</data_item>
    <data_item name="emulab.net.parameter.raw">False</data_item>
    <data_item name="emulab.net.parameter.n">3</data_item>
  </data_set>
</rspec>